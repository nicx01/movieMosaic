<div class="container">
  <h2>Recomendador Movie Mosaic</h2>

  <form (ngSubmit)="obtenerRecomendaciones()" class="form">
    <label for="userId">ID de Usuario:</label>
    <input type="number" id="userId" [(ngModel)]="userId" name="userId" min="1" required>

    <label for="nRecomendaciones">Número de recomendaciones:</label>
    <input type="number" id="nRecomendaciones" [(ngModel)]="nRecomendaciones" name="nRecomendaciones" min="1" max="20" required>

    <button type="submit">Obtener Recomendaciones</button>
  </form>

  <p class="error" *ngIf="error">{{ error }}</p>

  <div class="grid" *ngIf="recomendaciones.length > 0">
    <div class="card" *ngFor="let rec of recomendaciones">
      <a *ngIf="rec.tmdbId" 
         [href]="'https://www.themoviedb.org/movie/' + rec.tmdbId" 
         target="_blank" 
         rel="noopener noreferrer">
        <img *ngIf="rec.posterUrl; else noImage" [src]="rec.posterUrl" [alt]="rec.title" />
        <ng-template #noImage>
          <div class="no-image">Sin imagen</div>
        </ng-template>
        <div class="info">
          <h3>{{ rec.title }}</h3>
          <p>Puntuación: {{ rec.score }}</p>
        </div>
      </a>
      <ng-container *ngIf="!rec.tmdbId">
        <img *ngIf="rec.posterUrl; else noImage2" [src]="rec.posterUrl" [alt]="rec.title" />
        <ng-template #noImage2>
          <div class="no-image">Sin imagen</div>
        </ng-template>
        <div class="info">
          <h3>{{ rec.title }}</h3>
          <p>Puntuación: {{ rec.score }}</p>
        </div>
      </ng-container>
    </div>
  </div>
</div>
